services:
  django_app:
    build: .
    image: family-tree
    container_name: family-tree
    network_mode: bridge
    environment:
      DB_ENGINE: django.db.backends.postgresql
      DB_NAME: ${DB_NAME}
      DB_USER: ${DB_USER}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_HOST: ${DB_HOST}
      DB_PORT: ${DB_PORT}
      DEBUG: "False"
      ALLOWED_HOSTS: "*"
    volumes:
      - django_static:/app/static
      - django_media:/app/media
    restart: always

volumes:
  django_static:
  django_media:
